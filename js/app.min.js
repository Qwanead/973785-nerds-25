var link=document.querySelector(".button--contacts"),mapGoogle=document.querySelector(".contacts__map-google"),pin=document.querySelector(".contacts"),popup=document.querySelector(".modal"),close=popup.querySelector(".modal__close"),form=popup.querySelector(".modal__form"),input=popup.querySelectorAll(".modal__input"),yourName=popup.querySelector("[name=name]"),yourEmail=popup.querySelector("[name=email]"),textarea=popup.querySelector("[name=textarea]"),isStorageSupport=!0,storageName="",storageEmail="";function removeError(e){for(var o=0;o<e.length;o++)e[o].classList.contains("modal__text--error")&&e[o].classList.remove("modal__text--error")}mapGoogle.classList.remove("contacts__map-google--no-js"),pin.classList.add("contacts--hidden-pin");try{storageName=localStorage.getItem("yourName"),storageEmail=localStorage.getItem("yourEmail")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal--show"),storageName&&storageEmail?(yourName.value=storageName,yourEmail.value=storageEmail,textarea.focus()):yourName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal--show"),popup.classList.remove("modal--error"),removeError(input)}),form.addEventListener("submit",function(e){if(yourName.value&&yourEmail.value&&textarea.value)isStorageSupport&&(localStorage.setItem("yourName",yourName.value),localStorage.setItem("yourEmail",yourEmail.value));else{e.preventDefault(),removeError(input),popup.classList.remove("modal--error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal--error");for(var o=0;o<input.length;o++)input[o].value||input[o].classList.add("modal__text--error")}}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),removeError(input),popup.classList.contains("modal--show")&&(popup.classList.remove("modal--show"),popup.classList.remove("modal--error")))});